name: Local Windows Deploy

on:
  push:
    branches:
      - main

jobs:
  build-and-deploy:
    runs-on: self-hosted
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4

    - name: Build Static Site (optional)
      run: |
        echo Building site...
        # For example, npm run build or msbuild for .NET projects
        # Replace this with your actual build command

    - name: Deploy to Local Folder
      run: |
        $source = "$env:GITHUB_WORKSPACE"
        $target = "D:\Deploy\MSILServer"

        if (Test-Path $target) {
            Remove-Item -Recurse -Force -Path "$target\*"
        } else {
            New-Item -ItemType Directory -Force -Path $target
        }

        Copy-Item -Path "$source\*" -Destination $target -Recurse -Force
        Write-Host "âœ… Deployed to $target"
      shell: pwsh
